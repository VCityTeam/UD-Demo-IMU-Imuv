os: linux
dist: focal
language: generic
services:
  - docker

before_install:
  - docker --version
  - docker-compose --version
  - sudo apt-get update
  - sudo apt-get -y install openssl

jobs:
  include:
    - stage: Building and running imuv container
      script:
        - cp env-default .env
        - ldd /usr/lib/git-core/git-remote-https
        - openssl version
        - mkdir wbo-boards
        - sudo chown -R 1000:1000 wbo-boards
        - docker-compose build
        - docker-compose up -d
        # - curl -X POST -H "X-Parse-Application-Id: my_parse_app_id" -H "Content-Type: application/json" -d '{"score":1337,"playerName":"John Doe","cheatMode":false}' http://localhost:1337/parse/classes/GameScore
        # - curl -X GET -H "X-Parse-Application-Id: my_parse_app_id" http://localhost:1337/parse/classes/GameScore/8A0YN6GkJ7
        - travis_wait 2
        - docker-compose down
